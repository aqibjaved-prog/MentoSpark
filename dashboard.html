<!DOCTYPE html>
<html>
<head>
  <title>MentoSpark Dashboard</title>
</head>
<body>
  <h2 id="status">Checking login...</h2>

  <div id="uploadSection" style="display: none;">
    <p>Welcome Admin or Senior Student! You can upload files.</p>
    <input type="file" id="fileInput"><br><br>
    <button onclick="alert('This demo uses Google Drive only. Upload manually.')">Upload File</button>
  </div>

  <hr>

  <h3>Available Files (Google Drive):</h3>
  <!-- Embed Google Drive folder -->
  <iframe src="https://drive.google.com/embeddedfolderview?id=1Dl5SFZQ39CurFdjiqvNFYpmTnP1BgwL2#grid"
          style="width:100%; height:500px; border:0;"></iframe>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAD8qGst9qIE_doHHAoA4RXaeIfDEw53XA",
      authDomain: "mentospark-23ad1.firebaseapp.com",
      projectId: "mentospark-23ad1",
      storageBucket: "mentospark-23ad1.appspot.com",
      messagingSenderId: "164763516722",
      appId: "1:164763516722:web:8907112c1b6ad4e6f2212b",
      measurementId: "G-1WXM0GBW68"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const allowedEmails = [
      "mohdamaan5512@gmail.com",
      "senior1@example.com",
      "senior2@example.com"
    ];

    const statusText = document.getElementById("status");
    const uploadSection = document.getElementById("uploadSection");

    onAuthStateChanged(auth, (user) => {
      if (user) {
        const email = user.email;
        statusText.innerText = "Logged in as: " + email;
        if (allowedEmails.includes(email)) {
          uploadSection.style.display = "block";
        } else {
          uploadSection.style.display = "none";
        }
      } else {
        statusText.innerText = "Not logged in. Please log in first.";
        uploadSection.style.display = "none";
      }
    });
  </script>
</body>
</html>
